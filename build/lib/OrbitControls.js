THREE.OrbitControls=function(e,t){function n(){return Math.pow(.95,b.zoomSpeed)}function o(e){H.theta-=e}function a(e){H.phi-=e}function i(e){b.object.isPerspectiveCamera?w/=e:b.object.isOrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom*e)),b.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function r(e){b.object.isPerspectiveCamera?w*=e:b.object.isOrthographicCamera?(b.object.zoom=Math.max(b.minZoom,Math.min(b.maxZoom,b.object.zoom/e)),b.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),b.enableZoom=!1)}function s(e){if(!1!==b.enabled){switch(e.preventDefault(),e.button){case b.mouseButtons.ORBIT:if(!1===b.enableRotate)return;!function(e){C.set(e.clientX,e.clientY)}(e),v=R.ROTATE;break;case b.mouseButtons.ZOOM:if(!1===b.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),v=R.DOLLY;break;case b.mouseButtons.PAN:if(!1===b.enablePan)return;!function(e){N.set(e.clientX,e.clientY)}(e),v=R.PAN}v!==R.NONE&&(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",u,!1),b.dispatchEvent(g))}}function c(e){if(!1!==b.enabled)switch(e.preventDefault(),v){case R.ROTATE:if(!1===b.enableRotate)return;!function(e){M.set(e.clientX,e.clientY),L.subVectors(M,C);var t=b.domElement===document?b.domElement.body:b.domElement;o(2*Math.PI*L.x/t.clientWidth*b.rotateSpeed),a(2*Math.PI*L.y/t.clientHeight*b.rotateSpeed),C.copy(M),b.update()}(e);break;case R.DOLLY:if(!1===b.enableZoom)return;!function(e){D.set(e.clientX,e.clientY),U.subVectors(D,x),U.y>0?i(n()):U.y<0&&r(n()),x.copy(D),b.update()}(e);break;case R.PAN:if(!1===b.enablePan)return;!function(e){A.set(e.clientX,e.clientY),k.subVectors(A,N),Z(k.x,k.y),N.copy(A),b.update()}(e)}}function u(e){!1!==b.enabled&&(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",u,!1),b.dispatchEvent(T),v=R.NONE)}function m(e){!1===b.enabled||!1===b.enableZoom||v!==R.NONE&&v!==R.ROTATE||(e.preventDefault(),e.stopPropagation(),b.dispatchEvent(g),function(e){e.deltaY<0?r(n()):e.deltaY>0&&i(n()),b.update()}(e),b.dispatchEvent(T))}function d(e){!1!==b.enabled&&!1!==b.enableKeys&&!1!==b.enablePan&&function(e){switch(e.keyCode){case b.keys.UP:Z(0,b.keyPanSpeed),b.update();break;case b.keys.BOTTOM:Z(0,-b.keyPanSpeed),b.update();break;case b.keys.LEFT:Z(b.keyPanSpeed,0),b.update();break;case b.keys.RIGHT:Z(-b.keyPanSpeed,0),b.update()}}(e)}function l(e){if(!1!==b.enabled){switch(e.touches.length){case 1:if(!1===b.enableRotate)return;!function(e){C.set(e.touches[0].pageX,e.touches[0].pageY)}(e),v=R.TOUCH_ROTATE;break;case 2:if(!1===b.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);x.set(0,o)}(e),v=R.TOUCH_DOLLY;break;case 3:if(!1===b.enablePan)return;!function(e){N.set(e.touches[0].pageX,e.touches[0].pageY)}(e),v=R.TOUCH_PAN;break;default:v=R.NONE}v!==R.NONE&&b.dispatchEvent(g)}}function h(e){if(!1!==b.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===b.enableRotate)return;if(v!==R.TOUCH_ROTATE)return;!function(e){M.set(e.touches[0].pageX,e.touches[0].pageY),L.subVectors(M,C);var t=b.domElement===document?b.domElement.body:b.domElement;o(2*Math.PI*L.x/t.clientWidth*b.rotateSpeed),a(2*Math.PI*L.y/t.clientHeight*b.rotateSpeed),C.copy(M),b.update()}(e);break;case 2:if(!1===b.enableZoom)return;if(v!==R.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+o*o);D.set(0,a),U.subVectors(D,x),U.y>0?r(n()):U.y<0&&i(n()),x.copy(D),b.update()}(e);break;case 3:if(!1===b.enablePan)return;if(v!==R.TOUCH_PAN)return;!function(e){A.set(e.touches[0].pageX,e.touches[0].pageY),k.subVectors(A,N),Z(k.x,k.y),N.copy(A),b.update()}(e);break;default:v=R.NONE}}function E(e){!1!==b.enabled&&(b.dispatchEvent(T),v=R.NONE)}function p(e){!1!==b.enabled&&e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return y.phi},this.getAzimuthalAngle=function(){return y.theta},this.saveState=function(){b.target0.copy(b.target),b.position0.copy(b.object.position),b.zoom0=b.object.zoom},this.reset=function(){b.target.copy(b.target0),b.object.position.copy(b.position0),b.object.zoom=b.zoom0,b.object.updateProjectionMatrix(),b.dispatchEvent(f),b.update(),v=R.NONE},this.update=function(){var t=new THREE.Vector3,n=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),a=n.clone().inverse(),i=new THREE.Vector3,r=new THREE.Quaternion;return function(){var e=b.object.position;return t.copy(e).sub(b.target),t.applyQuaternion(n),y.setFromVector3(t),b.autoRotate&&v===R.NONE&&o(2*Math.PI/60/60*b.autoRotateSpeed),y.theta+=H.theta,y.phi+=H.phi,y.theta=Math.max(b.minAzimuthAngle,Math.min(b.maxAzimuthAngle,y.theta)),y.phi=Math.max(b.minPolarAngle,Math.min(b.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=w,y.radius=Math.max(b.minDistance,Math.min(b.maxDistance,y.radius)),b.target.add(P),t.setFromSpherical(y),t.applyQuaternion(a),e.copy(b.target).add(t),b.object.lookAt(b.target),!0===b.enableDamping?(H.theta*=1-b.dampingFactor,H.phi*=1-b.dampingFactor):H.set(0,0,0),w=1,P.set(0,0,0),!!(j||i.distanceToSquared(b.object.position)>O||8*(1-r.dot(b.object.quaternion))>O)&&(b.dispatchEvent(f),i.copy(b.object.position),r.copy(b.object.quaternion),j=!1,!0)}}(),this.dispose=function(){b.domElement.removeEventListener("contextmenu",p,!1),b.domElement.removeEventListener("mousedown",s,!1),b.domElement.removeEventListener("wheel",m,!1),b.domElement.removeEventListener("touchstart",l,!1),b.domElement.removeEventListener("touchend",E,!1),b.domElement.removeEventListener("touchmove",h,!1),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",u,!1),window.removeEventListener("keydown",d,!1)};var b=this,f={type:"change"},g={type:"start"},T={type:"end"},R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},v=R.NONE,O=1e-6,y=new THREE.Spherical,H=new THREE.Spherical,w=1,P=new THREE.Vector3,j=!1,C=new THREE.Vector2,M=new THREE.Vector2,L=new THREE.Vector2,N=new THREE.Vector2,A=new THREE.Vector2,k=new THREE.Vector2,x=new THREE.Vector2,D=new THREE.Vector2,U=new THREE.Vector2,S=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),P.add(e)}}(),V=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),P.add(e)}}(),Z=function(){var e=new THREE.Vector3;return function(t,n){var o=b.domElement===document?b.domElement.body:b.domElement;if(b.object.isPerspectiveCamera){var a=b.object.position;e.copy(a).sub(b.target);var i=e.length();i*=Math.tan(b.object.fov/2*Math.PI/180),S(2*t*i/o.clientHeight,b.object.matrix),V(2*n*i/o.clientHeight,b.object.matrix)}else b.object.isOrthographicCamera?(S(t*(b.object.right-b.object.left)/b.object.zoom/o.clientWidth,b.object.matrix),V(n*(b.object.top-b.object.bottom)/b.object.zoom/o.clientHeight,b.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),b.enablePan=!1)}}();b.domElement.addEventListener("contextmenu",p,!1),b.domElement.addEventListener("mousedown",s,!1),b.domElement.addEventListener("wheel",m,!1),b.domElement.addEventListener("touchstart",l,!1),b.domElement.addEventListener("touchend",E,!1),b.domElement.addEventListener("touchmove",h,!1),window.addEventListener("keydown",d,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});